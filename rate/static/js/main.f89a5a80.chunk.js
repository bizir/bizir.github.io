(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{330:function(e,t,a){e.exports=a.p+"static/media/persik.4e1ec840.png"},337:function(e,t,a){e.exports=a(758)},489:function(e,t,a){e.exports=a.p+"static/media/Table.515d2fa9.less"},757:function(e,t,a){},758:function(e,t,a){"use strict";a.r(t);a(338),a(340);var n=a(1),r=a.n(n),o=a(7),c=a.n(o),l=a(137),i=a.n(l),u=a(58),s=a(51),d=a(61),p=a(59),f=a(62),m=a(33),h=(a(361),a(362),a(19)),b=a(764),g=a(762),O=a(766),y=a(10),v=a(113),E=a(761),j=a(334),I=a(763),w=a(141),k=a(124),C=a(767),S=a(765),L=(r.a.Component,w.a.Option),_=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleCurrencyChange=function(e){"value"in a.props||a.setState({currency:e}),a.triggerChange({currency:e})},a.triggerChange=function(e){var t=a.props.onChange;t&&t(Object.assign({},a.state,e))},a}return Object(f.a)(t,e),Object(s.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e){return"value"in e?Object(h.a)({},e.value||{}):null}}]),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.options,a=e.type,n=(e.typeImage,e.ref),o=e.onChange,c=e.value;e.objId;return t=t||[],"bool"===a?r.a.createElement(k.a,{chacked:c,ref:n,onChange:o}):"number"===a?r.a.createElement(C.a,{value:c,ref:n,onChange:o}):"select"===a?t.length>0?r.a.createElement(w.a,{value:c,ref:n,onChange:o},t.map(function(e){return r.a.createElement(L,{key:e.value,value:e.value},e.label)})):r.a.createElement("p",null,"\u041d\u0435\u0442 \u043e\u0431\u044c\u0435\u043a\u0442\u043e\u0432 \u0434\u043b\u044f \u0432\u044b\u0431\u043e\u0440\u0430"):r.a.createElement(S.a,{ref:n,value:c,onChange:o})}}]),t}(r.a.Component),A=b.a.Item,F=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).renderCell=function(e){var t,n=a.props,o=n.editable,c=n.editing,l=n.dataIndex,i=n.user,u=n.type,s=n.children,d=(e=e||{getFieldDecorator:function(){}}).getFieldDecorator;return o&&(t=c?r.a.createElement(A,{style:{margin:0}},d(l,{rules:[],initialValue:i[l],valuePropName:"value"})(r.a.createElement(_,{type:u,options:a.props.options,typeImage:a.props.typeImage,objId:a.props.itemId}))):r.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24}},s)),o||(t=r.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24}},s)),r.a.createElement("td",null,t)},a.state={editing:!1,isMouseOver:!1},a}return Object(f.a)(t,e),Object(s.a)(t,[{key:"toggleEdit",value:function(){var e=!this.state.editing;this.setState({editing:e})}},{key:"save",value:function(){var e=this,t=this.props,a=t.user,n=t.handleSave;t.form.validateFields(function(t,r){t||(e.toggleEdit(),n(Object(h.a)({},a,r)))})}},{key:"getPropName",value:function(e){return"bool"===e?"checked":"value"}},{key:"getValue",value:function(e){var t=this.props,a=t.dataIndex,n=t.user;if("select"===e&&this.props.options.length>0){var r=this.props.options.find(function(e){return e.value==n[a]});if(r)return n[a]}return n[a]}},{key:"render",value:function(){var e=this.props.form;return this.renderCell(e)}}]),t}(n.Component),x=(a(489),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={editId:0,pagination:{showSizeChanger:!0},sorter:{order:"asc"}},a.getColums=function(e,t){if(t=[]){var n=a.state,o=(n.editId,n.sorter),c=n.isEditable,l=a.props.getActionsShow;l=l||function(){return[]},e=e.map(function(e){return e.dataIndex===o.field?Object(h.a)({},e,{sortOrder:o.order}):Object(h.a)({},e,{sortOrder:!1})});var i=[];return c&&(i=[{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",dataIndex:"actions",render:function(e,t){var n=a.state.editId,o=a.props.keyId||"id",c=[r.a.createElement(y.a,{type:"edit",onClick:function(){return a.editable(t[o])}})].concat(Object(v.a)(l(t)));if(t[o]!==n){var i=[];return c.forEach(function(e,t){i.push(e),t!=c.length-1&&i.push(r.a.createElement(E.a,{type:"vertical"}))}),r.a.createElement(g.a,null,i.map(function(e,t){return Object(h.a)({},e,{key:t})}))}return r.a.createElement(g.a,null,r.a.createElement(j.a,{placement:"top",title:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"},r.a.createElement(y.a,{type:"close",onClick:function(){return a.editable(0)}})),r.a.createElement(E.a,{type:"vertical"}),r.a.createElement(j.a,{placement:"top",title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},r.a.createElement(y.a,{type:"check",onClick:function(){return a.save()}})))}}]),[].concat(Object(v.a)(e),Object(v.a)(t),Object(v.a)(i))}return e},a.editable=function(e){a.setState({editId:e})},a.save=function(){var e=a.state.editId,t=a.props,n=t.form,r=t.onChange,o=t.users,c=a.props.keyId||"id";n.validateFields(function(t,n){if(!t){var l=o.find(function(t){return t[c]==e});r&&r(Object(h.a)({},l,n)),a.editable(0)}})},a.onSave=function(e){var t=a.props,n=t.users,r=t.onChange,o=n.map(function(t){return t.id===e.id?e:t});r&&r(o)},a}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.editId,n=(t.sorter,this.props),o=(n.isEditable,n.pagination),c=n.onSortChange,l=n.columns,i=n.addColumns,u=n.users,s=n.form,d=this.props.keyId||"id",p={body:{cell:F}},f=this.getColums(l,i).map(function(t){return t.editable?Object(h.a)({},t,{onCell:function(n){return Object(h.a)({},t,{user:n,itemId:n[d],type:t.type?t.type:"text",editable:t.editable,editing:n[d]==a,dataIndex:t.dataIndex,title:t.title,form:s,handleSave:function(t){return e.onSave(t)}})}}):t});return r.a.createElement(I.a,{key:d,rowKey:function(e){return e[d]+""},components:p,rowClassName:function(){return"editable-row"},dataSource:u,columns:f,pagination:o,onChange:function(t,a,n){e.setState({sorter:Object(h.a)({},n)},function(){n.order=n.order||"",c(t.current,10,n.field,n.order.replace("ascend","asc").replace("descend","desc"))})}})}}]),t}(n.Component)),P=b.a.create()(x),G=b.a.Item,R=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.items,a=e.totalCount,n=e.isEditable,o=e.isPagination,c=e.keyId,l=e.columns,i=e.getItems,u=e.createItem,s=e.deleteItem,d=e.updateItem,p=e.form,f=e.titleModal,m=e.isOpenModal,v=e.closeModal,E=p.getFieldDecorator,j=!!o&&Object(h.a)({},this.state.pagination,{total:a});return r.a.createElement(g.a,null,r.a.createElement(O.a,{title:f||"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",visible:m,okText:"\u041e\u043a",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",onOk:function(){p.validateFields(function(e,t){e||u(t)})},onCancel:function(){v&&v()}},r.a.createElement(b.a,null,l.filter(function(e){return e.editable}).map(function(e,t){return r.a.createElement(g.a,{key:t},r.a.createElement(G,{label:e.title,style:{margin:0}},E(e.dataIndex,{rules:[]})(r.a.createElement(_,{type:e.type,options:e.options,typeImage:e.typeImage,objId:0}))))}))),r.a.createElement(P,{key:c,onChange:d,isEditable:n,users:t,keyId:c,pagination:j,getActionsShow:function(e){return[r.a.createElement(y.a,{type:"delete",onClick:function(){s(e)}})]},columns:l,onSortChange:i}))}}]),t}(r.a.Component),N=b.a.create()(R),T=a(76),U=a(177),W=a(324),M=a(36),D=a.n(M),B=a(77),V=a(142),K=a.n(V),H=new(a(335).a),z=function(e,t){var a=H.get("token");return t.params=Object(h.a)({},t.params),K.a.defaults.headers.common.Authorization="Bearer "+a,K.a.get(e,t)},J=function(e){var t={};return window.location.search.replace("?","").split("&").map(function(e){return e.split("=")}).forEach(function(e){return t[e[0]]=e[1]}),t[e]},Y="http://localhost:50291/api",q=(a(285),{myAccount:{},followers:[],followers_count:[],followers_loading:!1}),Q=function(e,t){return function(){var a=Object(B.a)(D.a.mark(function a(n,r){return D.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(null!=e&&e>0){a.next=4;break}return n({type:"FOLLOWERS_COUNT",payload:0}),n({type:"FOLLOWERS",payload:[]}),a.abrupt("return");case 4:n({type:"FOLLOWERS_LOADING",payload:!0}),z(Y+"/followers/GetFollowersFilter",{params:{groupId:e,sorter:t}}).then(function(e){e=e.data,console.log(e),e.isSuccess&&(n({type:"FOLLOWERS_COUNT",payload:e.object.count}),n({type:"FOLLOWERS",payload:e.object.items}),n({type:"FOLLOWERS_LOADING",payload:!1}))});case 6:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()},X=function(e,t){return function(){var a=Object(B.a)(D.a.mark(function a(n,r){return D.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:z(Y+"/followers/GetFollowersFilter",{params:{groupId:e,followerId:t}}).then(function(e){(e=e.data).isSuccess&&e.object.count>0&&n({type:"MYFOLLOWER",payload:e.object.items[0]})});case 1:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()},Z=(window.VK,{select_group:{}}),$=Q,ee=X,te=function(e){return function(){var t=Object(B.a)(D.a.mark(function t(a,n){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:z(Y+"/group/GetGroupById",{params:{socialId:e}}).then(function(e){(e=e.data).isSuccess?a({type:"SELECTGROUP",payload:e.object}):a({type:"SELECTGROUP",payload:null})}).catch(function(){return a({type:"SELECTGROUP",payload:null})});case 1:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},ae=[{title:"\u041d\u043e\u043c\u0435\u0440",dataIndex:"num"},{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",dataIndex:"name",render:function(e,t){return r.a.createElement("a",{href:"https://vk.com/id"+t.followerId},e)},editable:!1},{title:"\u041b\u0430\u0439\u043a\u0438",dataIndex:"likes",sorter:!0,editable:!1},{title:"\u0420\u0435\u043f\u043e\u0441\u0442\u044b",dataIndex:"reposts",sorter:!0,editable:!1},{title:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",dataIndex:"comments",sorter:!0,editable:!1},{title:"\u0411\u0430\u043b\u043b\u044b",dataIndex:"balls",sorter:!0,editable:!1}],ne=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=J("vk_group_id"),t=J("vk_user_id");this.props.getFollowers(e),this.props.getGroupById(e),this.props.getFollowerById(e,t)}},{key:"render",value:function(){var e=this.props,t=e.id,a=(e.go,e.fetchedUser),n=e.followers,o=e.followers_count,c=e.followers_loading,l=e.select_group,i=e.getFollowers,u=e.myAccount,s=J("vk_group_id");return console.log("myAccount",u),null==l?r.a.createElement(m.Panel,{id:t},r.a.createElement(m.PanelHeader,null,"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u043e\u0432"),r.a.createElement("h1",{style:{paddingTop:200,"text-align":"center"}},"\u041d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0434\u0430\u043d\u043d\u043e\u0439 \u0433\u0440\u0443\u043f\u043f\u0435")):r.a.createElement(m.Panel,{id:t},r.a.createElement(m.PanelHeader,null,"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u043e\u0432"),a&&r.a.createElement(m.Group,{title:"\u0412\u044b \u0432\u043e\u0448\u043b\u0438 \u043a\u0430\u043a"},r.a.createElement(m.ListItem,{before:a.photo_200?r.a.createElement(m.Avatar,{src:a.photo_200}):null,description:a.city&&a.city.title?a.city.title:""},"".concat(a.first_name," ").concat(a.last_name))),l.name&&r.a.createElement(m.Group,{title:"\u0413\u0440\u0443\u043f\u043f\u0430"},r.a.createElement(m.ListItem,{before:l.photoOriginal?r.a.createElement(m.Avatar,{src:l.photoOriginal}):null,description:u&&"\u0412\u044b \u043d\u0430 ".concat(u.num," \u043c\u0435\u0441\u0442\u0435")},r.a.createElement("a",{href:"https://vk.com/"+l.screenName},"".concat(l.name)))),l.name&&r.a.createElement(m.Group,{title:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u043e\u0432"},r.a.createElement(W.a,{spinning:c},r.a.createElement(N,{isOpenModal:!1,titleModal:"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0438",createItem:function(e){},updateItem:function(e){},getItems:function(e,t,a,n){i(s,{page:e,sizePage:t,fields:a,sort:n})},isEditable:!1,items:n,keyId:"followerId",deleteItem:function(e){},closeModal:function(){},totalCount:o,isPagination:!0,columns:ae}))))}}]),t}(r.a.Component);var re=Object(U.b)(function(e){return{followers:e.followers.followers,followers_count:e.followers.followers_count,followers_loading:e.followers.followers_loading,select_group:e.groups.select_group,myAccount:e.followers.myAccount}},function(e){return Object(T.bindActionCreators)({getFollowers:$,getGroupById:te,getFollowerById:ee},e)})(ne),oe=a(330),ce=a.n(oe),le=(a(757),a(331)),ie=a.n(le),ue=a(236),se=a.n(ue),de=Object(m.platform)(),pe=function(e){return r.a.createElement(m.Panel,{id:e.id},r.a.createElement(m.PanelHeader,{left:r.a.createElement(m.HeaderButton,{onClick:e.go,"data-to":"home"},de===m.IOS?r.a.createElement(ie.a,null):r.a.createElement(se.a,null))},"Persik"),r.a.createElement("img",{className:"Persik",src:ce.a,alt:"Persik The Cat"}))},fe=(window.VK,{account:{},auth:"",isAuth:!1}),me=Object(T.combineReducers)({groups:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECTGROUP":return Object(h.a)({},e,{select_group:t.payload});default:return e}},followers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOWERS":return Object(h.a)({},e,{followers:Object(v.a)(t.payload)});case"FOLLOWERS_COUNT":return Object(h.a)({},e,{followers_count:t.payload});case"FOLLOWERS_LOADING":return Object(h.a)({},e,{followers_loading:t.payload});case"MYFOLLOWER":return Object(h.a)({},e,{myAccount:t.payload});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(h.a)({},e,{auth:t.payload,isAuth:!0});case"ISLOGIN":return Object(h.a)({},e,{isAuth:t.payload});case"LOGOUT":return Object(h.a)({},e,{auth:null,isAuth:!1});case"ACCOUNT_BALANCE":return Object(h.a)({},e,{account:Object(h.a)({},e.account,{balance:t.payload})});case"ACCOUNT":return Object(h.a)({},e,{account:t.payload});default:return e}}}),he=a(332),be=a(333),ge=Object(T.createStore)(me,Object(he.composeWithDevTools)(Object(T.applyMiddleware)(be.a))),Oe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).go=function(e){a.setState({activePanel:e.currentTarget.dataset.to})},a.state={activePanel:"home",fetchedUser:null},a}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;i.a.subscribe(function(t){switch(t.detail.type){case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data});break;default:console.log(t.detail.type)}}),i.a.send("VKWebAppGetUserInfo",{})}},{key:"render",value:function(){return r.a.createElement(U.a,{store:ge},r.a.createElement(m.View,{activePanel:this.state.activePanel},r.a.createElement(re,{id:"home",fetchedUser:this.state.fetchedUser,go:this.go}),r.a.createElement(pe,{id:"persik",go:this.go})))}}]),t}(r.a.Component);i.a.send("VKWebAppInit",{}),c.a.render(r.a.createElement(Oe,null),document.getElementById("root"))}},[[337,1,2]]]);
//# sourceMappingURL=main.f89a5a80.chunk.js.map